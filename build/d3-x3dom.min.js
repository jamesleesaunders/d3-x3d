(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory(require("d3")):typeof define==="function"&&define.amd?define(["d3"],factory):(global.d3=global.d3||{},global.d3.x3dom=factory(global.d3))})(this,function(d3){"use strict";var version="1.1.2";var license="GPL-2.0";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function dataTransform(data){var SINGLE_SERIES=1;var MULTI_SERIES=2;var coordinateKeys=["x","y","z"];var dataType=data.key!==undefined?SINGLE_SERIES:MULTI_SERIES;var rowKey=function(){if(dataType===SINGLE_SERIES){return d3.values(data)[0]}}();var rowTotal=function(){if(dataType===SINGLE_SERIES){return d3.sum(data.values,function(d){return d.value})}}();var rowKeys=function(){if(dataType===MULTI_SERIES){return data.map(function(d){return d.key})}}();var rowTotals=function(){if(dataType===MULTI_SERIES){var ret={};d3.map(data).values().forEach(function(d){var rowKey=d.key;d.values.forEach(function(d){ret[rowKey]=typeof ret[rowKey]==="undefined"?0:ret[rowKey];ret[rowKey]+=d.value})});return ret}}();var rowTotalsMax=function(){if(dataType===MULTI_SERIES){return d3.max(d3.values(rowTotals))}}();var rowValuesKeys=function(){if(dataType===SINGLE_SERIES){return Object.keys(data.values[0])}else{return Object.keys(data[0].values[0])}}();var union=function union(array1,array2){var ret=[];var arr=array1.concat(array2);var len=arr.length;var assoc={};while(len--){var item=arr[len];if(!assoc[item]){ret.unshift(item);assoc[item]=true}}return ret};var columnKeys=function(){if(dataType===SINGLE_SERIES){return d3.values(data.values).map(function(d){return d.key})}var ret=[];d3.map(data).values().forEach(function(d){var tmp=[];d.values.forEach(function(d,i){tmp[i]=d.key});ret=union(tmp,ret)});return ret}();var columnTotals=function(){if(dataType!==MULTI_SERIES){return}var ret={};d3.map(data).values().forEach(function(d){d.values.forEach(function(d){var columnName=d.key;ret[columnName]=typeof ret[columnName]==="undefined"?0:ret[columnName];ret[columnName]+=d.value})});return ret}();var columnTotalsMax=function(){if(dataType===MULTI_SERIES){return d3.max(d3.values(columnTotals))}}();var valueMin=function(){if(dataType===SINGLE_SERIES){return d3.min(data.values,function(d){return+d.value})}var ret=void 0;d3.map(data).values().forEach(function(d){d.values.forEach(function(d){ret=typeof ret==="undefined"?d.value:d3.min([ret,+d.value])})});return+ret}();var valueMax=function(){var ret=void 0;if(dataType===SINGLE_SERIES){ret=d3.max(data.values,function(d){return+d.value})}else{d3.map(data).values().forEach(function(d){d.values.forEach(function(d){ret=typeof ret!=="undefined"?d3.max([ret,+d.value]):+d.value})})}return ret}();var valueExtent=function(){return[valueMin,valueMax]}();var coordinatesMin=function(){var ret={};if(dataType===SINGLE_SERIES){coordinateKeys.forEach(function(key){ret[key]=d3.min(data.values,function(d){return+d[key]})});return ret}else{d3.map(data).values().forEach(function(d){d.values.forEach(function(d){coordinateKeys.forEach(function(key){ret[key]=key in ret?d3.min([ret[key],+d[key]]):d[key]})})})}return ret}();var coordinatesMax=function(){var ret={};if(dataType===SINGLE_SERIES){coordinateKeys.forEach(function(key){ret[key]=d3.max(data.values,function(d){return+d[key]})});return ret}else{d3.map(data).values().forEach(function(d){d.values.forEach(function(d){coordinateKeys.forEach(function(key){ret[key]=key in ret?d3.max([ret[key],+d[key]]):d[key]})})})}return ret}();var coordinatesExtent=function(){var ret={};coordinateKeys.forEach(function(key){ret[key]=[coordinatesMin[key],coordinatesMax[key]]});return ret}();var decimalPlaces=function decimalPlaces(num){var match=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0}return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0))};var maxDecimalPlace=function(){var ret=0;if(dataType===MULTI_SERIES){d3.map(data).values().forEach(function(d){d.values.forEach(function(d){ret=d3.max([ret,decimalPlaces(d.value)])})})}return ret>20?20:ret}();var thresholds=function(){var distance=valueMax-valueMin;var bands=[.15,.4,.55,.9];return bands.map(function(v){return Number((valueMin+v*distance).toFixed(maxDecimalPlace))})}();var summary=function summary(){return{dataType:dataType,rowKey:rowKey,rowTotal:rowTotal,rowKeys:rowKeys,rowTotals:rowTotals,rowTotalsMax:rowTotalsMax,rowValuesKeys:rowValuesKeys,columnKeys:columnKeys,columnTotals:columnTotals,columnTotalsMax:columnTotalsMax,valueMin:valueMin,valueMax:valueMax,valueExtent:valueExtent,coordinatesMin:coordinatesMin,coordinatesMax:coordinatesMax,coordinatesExtent:coordinatesExtent,maxDecimalPlace:maxDecimalPlace,thresholds:thresholds}};var rotate=function rotate(){var columnKeys=data.map(function(d){return d.key});var rowKeys=data[0].values.map(function(d){return d.key});var rotated=rowKeys.map(function(rowKey,rowIndex){var values=columnKeys.map(function(columnKey,columnIndex){var values=_extends({},data[columnIndex].values[rowIndex]);values.key=columnKey;return values});return{key:rowKey,values:values}});return rotated};return{summary:summary,rotate:rotate}}function componentAxis(){var dimensions={x:40,y:40,z:40};var color="black";var classed="d3X3domAxis";var scale=void 0;var direction=void 0;var tickDirection=void 0;var tickArguments=[];var tickValues=null;var tickFormat=null;var tickSize=1;var tickPadding=1;var axisDirectionVectors={x:[1,0,0],y:[0,1,0],z:[0,0,1]};var axisRotationVectors={x:[1,1,0,Math.PI],y:[0,0,0,0],z:[0,1,1,Math.PI]};var getAxisDirectionVector=function getAxisDirectionVector(axisDir){return axisDirectionVectors[axisDir]};var getAxisRotationVector=function getAxisRotationVector(axisDir){return axisRotationVectors[axisDir]};var my=function my(selection){selection.classed(classed,true);var makeSolid=function makeSolid(selection,color){selection.append("appearance").append("material").attr("diffuseColor",color||"black");return selection};var range=scale.range();var range0=range[0];var range1=range[range.length-1];var axisDirectionVector=getAxisDirectionVector(direction);var tickDirectionVector=getAxisDirectionVector(tickDirection);var axisRotationVector=getAxisRotationVector(direction);var tickRotationVector=getAxisRotationVector(tickDirection);var path=selection.selectAll("transform").data([null]);var tickValuesDefault=scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain();tickValues=tickValues===null?tickValuesDefault:tickValues;var tick=selection.selectAll(".tick").data(tickValues,scale).order();var tickExit=tick.exit();var tickEnter=tick.enter().append("transform").attr("translation",function(t){return axisDirectionVector.map(function(a){return scale(t)*a}).join(" ")}).attr("class","tick");var line=tick.select(".tickLine");path=path.merge(path.enter().append("transform").attr("rotation",axisRotationVector.join(" ")).attr("translation",axisDirectionVector.map(function(d){return d*(range0+range1)/2}).join(" ")).append("shape").call(makeSolid,color).attr("class","domain"));tick=tick.merge(tickEnter);line=line.merge(tickEnter.append("transform"));var tickFormatDefault=scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):function(d){return d};tickFormat=tickFormat===null?tickFormatDefault:tickFormat;if(tickFormat!==""){var text=tick.select("billboard");var newText=tickEnter.append("transform");newText.attr("translation",tickDirectionVector.map(function(d){return-d*tickPadding})).append("billboard").attr("axisofrotation","0 0 0").append("shape").call(makeSolid,"black").append("text").attr("string",tickFormat).append("fontstyle").attr("size",1.3).attr("family","SANS").attr("style","BOLD").attr("justify","MIDDLE");text=text.merge(newText)}tickExit.remove();path.append("cylinder").attr("radius",.1).attr("height",range1-range0);line.attr("translation",tickDirectionVector.map(function(d){return d*tickSize/2}).join(" ")).attr("rotation",tickRotationVector.join(" ")).attr("class","tickLine").append("shape").call(makeSolid,"#d3d3d3").append("cylinder").attr("radius",.05).attr("height",tickSize)};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return my};my.scale=function(_v){if(!arguments.length)return scale;scale=_v;return my};my.direction=function(_v){if(!arguments.length)return direction;direction=_v;return my};my.tickDirection=function(_v){if(!arguments.length)return tickDirection;tickDirection=_v;return my};my.tickArguments=function(_v){if(!arguments.length)return tickArguments;tickArguments=_v;return my};my.tickValues=function(_v){if(!arguments.length)return tickValues;tickValues=_v;return my};my.tickFormat=function(_v){if(!arguments.length)return tickFormat;tickFormat=_v;return my};my.tickSize=function(_v){if(!arguments.length)return tickSize;tickSize=_v;return my};my.tickPadding=function(_v){if(!arguments.length)return tickPadding;tickPadding=_v;return my};my.color=function(_v){if(!arguments.length)return color;color=_v;return my};return my}function componentAxisThreePlane(){var dimensions={x:40,y:40,z:40};var colors=["blue","red","green"];var classed="d3X3domAxisThreePlane";var xScale=void 0;var yScale=void 0;var zScale=void 0;var my=function my(selection){var layers=["xzAxis","yzAxis","yxAxis","zxAxis"];selection.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});var xzAxis=componentAxis().scale(xScale).direction("x").tickDirection("z").tickSize(zScale.range()[1]-zScale.range()[0]).tickPadding(xScale.range()[0]).color("blue");var yzAxis=componentAxis().scale(yScale).direction("y").tickDirection("z").tickSize(zScale.range()[1]-zScale.range()[0]).color("red");var yxAxis=componentAxis().scale(yScale).direction("y").tickDirection("x").tickSize(xScale.range()[1]-xScale.range()[0]).tickFormat("").color("red");var zxAxis=componentAxis().scale(zScale).direction("z").tickDirection("x").tickSize(xScale.range()[1]-xScale.range()[0]).color("black");selection.select(".xzAxis").call(xzAxis);selection.select(".yzAxis").call(yzAxis);selection.select(".yxAxis").call(yxAxis);selection.select(".zxAxis").call(zxAxis)};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};return my}function componentBars(){var dimensions={x:40,y:40,z:2};var colors=["orange","red","yellow","steelblue","green"];var classed="d3X3domBars";var xScale=void 0;var yScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y;if(typeof xScale==="undefined"){xScale=d3.scaleBand().domain(columnKeys).rangeRound([0,dimensionX]).padding(.3)}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY])}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(columnKeys).range(colors)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var bars=selection.selectAll(".bar").data(function(d){return d.values});var barsEnter=bars.enter().append("transform").classed("bar",true).attr("scale",function(d){var x=xScale.bandwidth();var y=yScale(d.value);var z=dimensions.z;return x+" "+y+" "+z}).attr("translation",function(d){var x=xScale(d.key);var y=yScale(d.value)/2;var z=0;return x+" "+y+" "+z}).append("shape");barsEnter.append("box").attr("size","1.0 1.0 1.0");barsEnter.append("appearance").append("material").attr("diffusecolor",function(d){return colorScale(d.key)}).attr("ambientintensity","0.1");barsEnter.merge(bars);bars.transition().attr("scale",function(d){var x=xScale.bandwidth();var y=yScale(d.value);var z=dimensions.z;return x+" "+y+" "+z}).attr("translation",function(d){var x=xScale(d.key);var y=yScale(d.value)/2;var z=0;return x+" "+y+" "+z});bars.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};return my}function componentBarsMultiSeries(){var dimensions={x:40,y:40,z:40};var colors=["orange","red","yellow","steelblue","green"];var classed="d3X3domBarsMultiSeries";var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleBand().domain(columnKeys).rangeRound([0,dimensionX]).padding(.5)}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY]).nice()}if(typeof zScale==="undefined"){zScale=d3.scaleBand().domain(rowKeys).range([0,dimensionZ]).padding(.7)}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(columnKeys).range(colors)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var bars=componentBars().xScale(xScale).yScale(yScale).dimensions({x:dimensions.x,y:dimensions.y,z:zScale.bandwidth()}).colors(colors);var barGroup=selection.selectAll(".barGroup").data(data);barGroup.enter().append("transform").classed("barGroup",true).attr("translation",function(d){var x=0;var y=0;var z=zScale(d.key);return x+" "+y+" "+z}).merge(barGroup).transition().each(function(){d3.select(this).call(bars)});barGroup.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};return my}var dispatch=d3.dispatch("d3X3domClick","d3X3domMouseOver","d3X3domMouseOut");function forwardEvent(event){var type=event.type;var target=d3.select(event.target);target.on(type)(event)}function getEventCoordinates(event){var pagePoint=getEventPagePoint(event);return{world:{x:event.hitPnt[0],y:event.hitPnt[1],z:event.hitPnt[2]},canvas:{x:event.layerX,y:event.layerY},page:{x:pagePoint.x,y:pagePoint.y}}}function getEventPagePoint(event){var pageX=-1;var pageY=-1;var convertPoint=window.webkitConvertPointFromPageToNode;if("getBoundingClientRect"in document.documentElement){var holder=getX3domHolder(event);var computedStyle=document.defaultView.getComputedStyle(holder,null);var paddingLeft=parseFloat(computedStyle.getPropertyValue("padding-left"));var borderLeftWidth=parseFloat(computedStyle.getPropertyValue("border-left-width"));var paddingTop=parseFloat(computedStyle.getPropertyValue("padding-top"));var borderTopWidth=parseFloat(computedStyle.getPropertyValue("border-top-width"));var box=holder.getBoundingClientRect();var scrolLeft=window.pageXOffset||document.body.scrollLeft;var scrollTop=window.pageYOffset||document.body.scrollTop;pageX=Math.round(event.layerX+(box.left+paddingLeft+borderLeftWidth+scrolLeft));pageY=Math.round(event.layerY+(box.top+paddingTop+borderTopWidth+scrollTop))}else if(convertPoint){var pagePoint=convertPoint(event.target,new WebKitPoint(0,0));pageX=Math.round(pagePoint.x);pageY=Math.round(pagePoint.y)}else{x3dom.debug.logError("Unable to find getBoundingClientRect or webkitConvertPointFromPageToNode")}return{x:pageX,y:pageY}}function getX3domHolder(event){var target=d3.select(event.target);var x3d=target.select(function(){var el=this;while(el.nodeName.toLowerCase()!=="x3d"){el=el.parentElement}return el});return x3d.select(function(){return this.parentNode}).node()}var events=Object.freeze({dispatch:dispatch,forwardEvent:forwardEvent,getEventCoordinates:getEventCoordinates,getEventPagePoint:getEventPagePoint,getX3domHolder:getX3domHolder});function componentBubbles(){var dimensions={x:40,y:40,z:40};var color="orange";var classed="d3X3domBubbles";var xScale=void 0;var yScale=void 0;var zScale=void 0;var sizeScale=void 0;var sizeDomain=[.5,4];var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),valueExtent=_dataTransform$summar.valueExtent,coordinatesMax=_dataTransform$summar.coordinatesMax;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([0,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([0,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([0,maxZ]).range([0,dimensionZ])}if(typeof sizeScale==="undefined"){sizeScale=d3.scaleLinear().domain(valueExtent).range(sizeDomain)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var makeSolid=function makeSolid(selection,color){selection.append("appearance").append("material").attr("diffusecolor",color||"black");return selection};var bubbles=selection.selectAll(".bubble").data(function(d){return d.values});var bubblesEnter=bubbles.enter().append("group").attr("class","bubble");bubblesEnter.append("transform").attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)}).append("shape").attr("onclick","d3.x3dom.events.forwardEvent(event);").on("click",function(e){dispatch.call("d3X3domClick",this,e)}).attr("onmouseover","d3.x3dom.events.forwardEvent(event);").on("mouseover",function(e){dispatch.call("d3X3domMouseOver",this,e)}).attr("onmouseout","d3.x3dom.events.forwardEvent(event);").on("mouseout",function(e){dispatch.call("d3X3domMouseOut",this,e)}).call(makeSolid,color).append("sphere").attr("radius",function(d){return sizeScale(d.value)});bubblesEnter.merge(bubbles);bubbles.transition().attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)});bubbles.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.sizeDomain=function(_v){if(!arguments.length)return sizeDomain;sizeDomain=_v;return my};my.color=function(_v){if(!arguments.length)return color;color=_v;return my};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentBubblesMultiSeries(){var dimensions={x:40,y:40,z:40};var colors=["green","red","yellow","steelblue","orange"];var classed="d3X3domBubblesMultiSeries";var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var sizeScale=void 0;var sizeDomain=[.5,3];var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,valueExtent=_dataTransform$summar.valueExtent,coordinatesMax=_dataTransform$summar.coordinatesMax;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([0,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([0,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([0,maxZ]).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(rowKeys).range(colors)}if(typeof sizeScale==="undefined"){sizeScale=d3.scaleLinear().domain(valueExtent).range(sizeDomain)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var bubbles=componentBubbles().xScale(xScale).yScale(yScale).zScale(zScale).sizeScale(sizeScale);var bubbleGroup=selection.selectAll(".bubbleGroup").data(data);bubbleGroup.enter().append("group").classed("bubbleGroup",true).merge(bubbleGroup).transition().each(function(d){var color=colorScale(d.key);bubbles.color(color);d3.select(this).call(bubbles)});bubbleGroup.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.sizeDomain=function(_v){if(!arguments.length)return sizeDomain;sizeDomain=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentCrosshair(){var dimensions={x:40,y:40,z:40};var colors=["blue","red","green"];var classed="d3X3domCrosshair";var radius=.1;var xScale=void 0;var yScale=void 0;var zScale=void 0;var my=function my(selection){selection.classed(classed,true);selection.each(function(data){var xOff=dimensions["x"]/2;var yOff=dimensions["y"]/2;var zOff=dimensions["z"]/2;var xVal=xScale(data.x);var yVal=yScale(data.y);var zVal=zScale(data.z);var positionVectors={x:[xOff,yVal,zVal],y:[xVal,yOff,zVal],z:[xVal,yVal,zOff]};function getPositionVector(axisDir){return positionVectors[axisDir].join(" ")}var rotationVectors={x:[1,1,0,Math.PI],y:[0,0,0,0],z:[0,1,1,Math.PI]};function getRotationVector(axisDir){return rotationVectors[axisDir].join(" ")}var colorScale=d3.scaleOrdinal().domain(Object.keys(dimensions)).range(colors);var ballSelect=selection.selectAll(".ball").data([data]);var ball=ballSelect.enter().append("transform").attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)}).classed("ball",true).append("shape");ball.append("appearance").append("material").attr("diffusecolor","blue");ball.append("sphere").attr("radius",.3);ball.merge(ballSelect);ballSelect.transition().ease(d3.easeQuadOut).attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)});var lineSelect=selection.selectAll(".line").data(Object.keys(dimensions));var line=lineSelect.enter().append("transform").classed("line",true).attr("translation",function(d){return getPositionVector(d)}).attr("rotation",function(d){return getRotationVector(d)}).append("shape");line.append("cylinder").attr("radius",radius).attr("height",function(d){return dimensions[d]});line.append("appearance").append("material").attr("diffusecolor",function(d){return colorScale(d)});line.merge(lineSelect);lineSelect.transition().ease(d3.easeQuadOut).attr("translation",function(d){return getPositionVector(d)})})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};return my}function componentLabel(){var dimensions={x:40,y:40,z:40};var color="black";var classed="d3X3domLabel";var offset=0;var xScale=void 0;var yScale=void 0;var zScale=void 0;var my=function my(selection){selection.classed(classed,true);selection.each(function(data){var makeSolid=function makeSolid(selection,color){selection.append("appearance").append("material").attr("diffusecolor",color||"black");return selection};var labelSelect=selection.selectAll(".label").data([data]);var label=labelSelect.enter().append("transform").attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)}).classed("label",true).append("billboard").attr("axisofrotation","0 0 0").append("transform").attr("translation",function(d){return offset+" "+offset+" "+offset}).append("shape").call(makeSolid,color).append("text").attr("string",function(d){return d.key}).append("fontstyle").attr("size",1).attr("family","SANS").attr("style","BOLD").attr("justify","START");label.merge(labelSelect);labelSelect.transition().ease(d3.easeQuadOut).attr("translation",function(d){return xScale(d.x)+" "+yScale(d.y)+" "+zScale(d.z)})})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.color=function(_v){if(!arguments.length)return color;color=_v;return my};my.offset=function(_v){if(!arguments.length)return offset;offset=_v;return my};return my}function componentRibbon(){var dimensions={x:40,y:40,z:5};var color="red";var classed="d3X3domRibbon";var xScale=void 0;var yScale=void 0;var array2dToString=function array2dToString(arr){return arr.reduce(function(a,b){return a.concat(b)},[]).reduce(function(a,b){return a.concat(b)},[]).join(" ")};var arrayToCoordIndex=function arrayToCoordIndex(arr){return arr.map(function(d,i){return i}).join(" ").concat(" -1")};var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y;if(typeof xScale==="undefined"){xScale=d3.scalePoint().domain(columnKeys).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY])}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var ribbonData=function ribbonData(d){return d.values.map(function(pointThis,indexThis,array){var indexNext=indexThis+1;if(indexNext>=array.length){return null}var pointNext=array[indexNext];var x1=xScale(pointThis.key);var x2=xScale(pointNext.key);var y1=yScale(pointThis.value);var y2=yScale(pointNext.value);var z1=1-dimensions.z/2;var z2=dimensions.z/2;var points=[[x1,y1,z1],[x1,y1,z2],[x2,y2,z2],[x2,y2,z1],[x1,y1,z1]];return{key:pointThis.key,value:pointThis.value,coordindex:arrayToCoordIndex(points),point:array2dToString(points),color:color,transparency:.2}}).filter(function(d){return d!==null})};var ribbon=selection.selectAll(".ribbon").data(ribbonData);var ribbonEnter=ribbon.enter().append("shape").classed("ribbon",true);ribbonEnter.append("indexedfaceset").attr("coordindex",function(d){return d.coordindex}).attr("solid",true).append("coordinate").attr("point",function(d){return d.point});ribbonEnter.append("appearance").append("twosidedmaterial").attr("diffusecolor",function(d){return d.color}).attr("transparency",function(d){return d.transparency});ribbonEnter.merge(ribbon);ribbon.transition().select("indexedfaceset").attr("coordindex",function(d){return d.coordindex}).select("coordinate").attr("point",function(d){return d.point});ribbon.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.color=function(_v){if(!arguments.length)return color;color=_v;return my};return my}function componentRibbonMultiSeries(){var dimensions={x:40,y:40,z:40};var colors=["orange","red","yellow","steelblue","green"];var classed="d3X3domRibbonMultiSeries";var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scalePoint().domain(columnKeys).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleBand().domain(rowKeys).range([0,dimensionZ]).padding(.4)}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(rowKeys).range(colors)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var ribbon=componentRibbon().xScale(xScale).yScale(yScale).dimensions({x:dimensions.x,y:dimensions.y,z:zScale.bandwidth()});var ribbonGroup=selection.selectAll(".ribbonGroup").data(data);ribbonGroup.enter().append("transform").classed("ribbonGroup",true).attr("translation",function(d){var x=0;var y=0;var z=zScale(d.key);return x+" "+y+" "+z}).append("group").merge(ribbonGroup).transition().each(function(d){var color=colorScale(d.key);ribbon.color(color);d3.select(this).call(ribbon)});ribbonGroup.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};return my}function componentSurface(){var dimensions={x:40,y:40,z:40};var colors=["blue","red"];var classed="d3X3domSurface";var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var array2dToString=function array2dToString(arr){return arr.reduce(function(a,b){return a.concat(b)},[]).reduce(function(a,b){return a.concat(b)},[]).join(" ")};var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scalePoint().domain(rowKeys).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scalePoint().domain(columnKeys).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleLinear().domain(valueExtent).range(colors).interpolate(d3.interpolateLab)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var surfaceData=function surfaceData(d){var coordPoints=function coordPoints(data){return data.map(function(X){return X.values.map(function(d){return[xScale(X.key),yScale(d.value),zScale(d.key)]})})};var coordIndex=function coordIndex(data){var ny=data.length;var nx=data[0].values.length;var coordIndexFront=Array.apply(0,Array(ny-1)).map(function(_,j){return Array.apply(0,Array(nx-1)).map(function(_,i){var start=i+j*nx;return[start,start+nx,start+nx+1,start+1,start,-1]})});var coordIndexBack=Array.apply(0,Array(ny-1)).map(function(_,j){return Array.apply(0,Array(nx-1)).map(function(_,i){var start=i+j*nx;return[start,start+1,start+nx+1,start+nx,start,-1]})});return coordIndexFront.concat(coordIndexBack)};var colorFaceSet=function colorFaceSet(data){return data.map(function(X){return X.values.map(function(d){var col=d3.color(colorScale(d.value));return""+Math.round(col.r/2.55)/100+" "+Math.round(col.g/2.55)/100+" "+Math.round(col.b/2.55)/100})})};return[{coordindex:array2dToString(coordIndex(d)),point:array2dToString(coordPoints(d)),color:array2dToString(colorFaceSet(d))}]};var surface=selection.selectAll(".surface").data(surfaceData);var surfaceSelect=surface.enter().append("shape").classed("surface",true).append("indexedfaceset").attr("coordindex",function(d){return d.coordindex});surfaceSelect.append("coordinate").attr("point",function(d){return d.point});surfaceSelect.append("color").attr("color",function(d){return d.color});surfaceSelect.merge(surface);var surfaceTransition=surface.transition().select("indexedfaceset").attr("coordindex",function(d){return d.coordindex});surfaceTransition.select("coordinate").attr("point",function(d){return d.point});surfaceTransition.select("color").attr("color",function(d){return d.color});surface.exit().remove()})};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentVectorFields(){var dimensions={x:40,y:40,z:40};var colors=d3.interpolateRdYlGn;var classed="d3X3domVectorFields";var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var sizeScale=void 0;var sizeDomain=[2,5];var vectorFunction=function vectorFunction(x,y,z){return{x:x,y:y,z:z}};var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),coordinatesMax=_dataTransform$summar.coordinatesMax,coordinatesMin=_dataTransform$summar.coordinatesMin;var minX=coordinatesMin.x,minY=coordinatesMin.y,minZ=coordinatesMin.z;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;var extent=d3.extent(data.values.map(function(f){var vx=void 0,vy=void 0,vz=void 0;if("vx"in f){vx=f.vx;vy=f.vy;vz=f.vz}else{var _vectorFunction=vectorFunction(f.x,f.y,f.z);vx=_vectorFunction.x;vy=_vectorFunction.y;vz=_vectorFunction.z}return new x3dom.fields.SFVec3f(vx,vy,vz).length()}));if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([minX,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([minY,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([minZ,maxZ]).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleSequential().domain(extent.slice().reverse()).interpolator(colors)}if(typeof sizeScale==="undefined"){sizeScale=d3.scaleLinear().domain(extent).range(sizeDomain)}};var my=function my(selection){selection.classed(classed,true);selection.each(function(data){init(data);var vectorData=function vectorData(d){return d.values.map(function(f){var vx=void 0,vy=void 0,vz=void 0;if("vx"in f){vx=f.vx;vy=f.vy;vz=f.vz}else{var _vectorFunction2=vectorFunction(f.x,f.y,f.z);vx=_vectorFunction2.x;vy=_vectorFunction2.y;vz=_vectorFunction2.z}var fromVector=new x3dom.fields.SFVec3f(0,1,0);var toVector=new x3dom.fields.SFVec3f(vx,vy,vz);var qDir=x3dom.fields.Quaternion.rotateFromTo(fromVector,toVector);var rot=qDir.toAxisAngle();if(!toVector.length()){return null}f.translation=xScale(f.x)+" "+yScale(f.y)+" "+zScale(f.z);f.value=toVector.length();f.rotation=rot[0].x+" "+rot[0].y+" "+rot[0].z+" "+rot[1];return f}).filter(function(f){return f!==null})};var arrows=selection.selectAll(".arrow").data(vectorData);var arrowsEnter=arrows.enter().append("transform").attr("translation",function(d){return d.translation}).attr("rotation",function(d){return d.rotation}).attr("class","arrow").append("transform").attr("translation",function(d){var offset=sizeScale(d.value)/2;return"0 "+offset+" 0"}).append("group").attr("onclick","d3.x3dom.events.forwardEvent(event);").attr("onmouseover","d3.x3dom.events.forwardEvent(event);").attr("onmouseout","d3.x3dom.events.forwardEvent(event);");var arrowHead=arrowsEnter.append("shape").on("click",function(e){dispatch.call("d3X3domClick",this,e)}).on("mouseover",function(e){dispatch.call("d3X3domMouseOver",this,e)}).on("mouseout",function(e){dispatch.call("d3X3domMouseOut",this,e)});arrowHead.append("appearance").append("material").attr("diffusecolor",function(d){return rgb2Hex(colorScale(d.value))});arrowHead.append("cylinder").attr("height",function(d){return sizeScale(d.value)}).attr("radius",.1);var arrowShaft=arrowsEnter.append("transform").attr("translation",function(d){var offset=sizeScale(d.value)/2;return"0 "+offset+" 0"}).append("shape").on("click",function(e){dispatch.call("d3X3domClick",this,e)}).on("mouseover",function(e){dispatch.call("d3X3domMouseOver",this,e)}).on("mouseout",function(e){dispatch.call("d3X3domMouseOut",this,e)});arrowShaft.append("appearance").append("material").attr("diffusecolor",function(d){return rgb2Hex(colorScale(d.value))});arrowShaft.append("cone").attr("height",1).attr("bottomradius",.4);arrowsEnter.merge(arrows);arrows.transition().attr("translation",function(d){return d.translation});arrows.exit().remove()})};function rgb2Hex(rgbStr){var _rgbStr$substring$rep=rgbStr.substring(4,rgbStr.length-1).replace(/ /g,"").split(","),_rgbStr$substring$rep2=slicedToArray(_rgbStr$substring$rep,3),red=_rgbStr$substring$rep2[0],green=_rgbStr$substring$rep2[1],blue=_rgbStr$substring$rep2[2];var rgb=blue|green<<8|red<<16;return"#"+(16777216+rgb).toString(16).slice(1)}my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.sizeDomain=function(_v){if(!arguments.length)return sizeDomain;sizeDomain=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.vectorFunction=function(_f){if(!arguments.length)return vectorFunction;vectorFunction=_f;return my};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentViewpoint(){var centerOfRotation=[0,0,0];var viewPosition=[80,15,80];var viewOrientation=[0,1,0,.8];var fieldOfView=.8;var classed="d3X3domViewpoint";var my=function my(selection){selection.append("viewpoint").classed(classed,true).attr("centerofrotation",centerOfRotation.join(" ")).attr("position",viewPosition.join(" ")).attr("orientation",viewOrientation.join(" ")).attr("fieldofview",fieldOfView).attr("set_bind","true")};my.quickView=function(view){switch(view){case"left":centerOfRotation=[0,0,0];viewPosition=[37.10119,18.70484,51.01594];viewOrientation=[.06724,.99767,-.01148,.33908];fieldOfView=1;break;case"side":centerOfRotation=[20,0,0];viewPosition=[20,20,50];viewOrientation=[0,0,0,0];fieldOfView=1;break;case"top":centerOfRotation=[0,0,0];viewPosition=[27.12955,106.67181,31.65828];viewOrientation=[-.86241,.3749,.34013,1.60141];fieldOfView=1;break;case"dimetric":default:centerOfRotation=[0,0,0];viewPosition=[80,15,80];viewOrientation=[0,1,0,.8];fieldOfView=.8}return my};my.centerOfRotation=function(_v){if(!arguments.length)return centerOfRotation;centerOfRotation=_v;return my};my.viewPosition=function(_v){if(!arguments.length)return viewPosition;viewPosition=_v;return my};my.viewOrientation=function(_v){if(!arguments.length)return viewOrientation;viewOrientation=_v;return my};my.fieldOfView=function(_v){if(!arguments.length)return fieldOfView;fieldOfView=_v;return my};return my}function componentVolumeSlice(){var dimensions={x:40,y:40,z:40};var classed="d3X3domVolume";var imageUrl="assets/scan1.png";var numberOfSlices=96;var slicesOverX=10;var slicesOverY=10;var my=function my(selection){selection.classed(classed,true);var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;var html="\n\t\t\t\t<transform>\n\t\t\t\t<volumedata id='volume' dimensions='"+dimensionX+" "+dimensionY+" "+dimensionZ+"'>\n\t\t\t\t<imagetextureatlas crossOrigin='anonymous' containerField='voxels' url='"+imageUrl+"' numberOfSlices='"+numberOfSlices+"' slicesOverX='"+slicesOverX+"' slicesOverY='"+slicesOverY+"'></imagetextureatlas>\n\t\t\t\t<opacitymapvolumestyle lightFactor='1.2' opacityFactor='6.0'>\n\t\t\t\t\t<imagetexture crossOrigin='anonymous' containerField='transferFunction' url='assets/transfer.png'></imagetexture>\n\t\t\t\t</opacitymapvolumestyle>\n\t\t\t\t</volumedata>\n\t\t\t\t</transform>\n\t\t\t";selection.append("group").html(html)};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.imageUrl=function(_v){if(!arguments.length)return imageUrl;imageUrl=_v;return this};my.numberOfSlices=function(_v){if(!arguments.length)return numberOfSlices;numberOfSlices=_v;return this};my.slicesOverX=function(_v){if(!arguments.length)return slicesOverX;slicesOverX=_v;return this};my.slicesOverY=function(_v){if(!arguments.length)return slicesOverY;slicesOverY=_v;return this};return my}var component={axis:componentAxis,axisThreePlane:componentAxisThreePlane,bars:componentBars,barsMultiSeries:componentBarsMultiSeries,bubbles:componentBubbles,bubblesMultiSeries:componentBubblesMultiSeries,crosshair:componentCrosshair,label:componentLabel,ribbon:componentRibbon,ribbonMultiSeries:componentRibbonMultiSeries,surface:componentSurface,vectorFields:componentVectorFields,viewpoint:componentViewpoint,volumeSlice:componentVolumeSlice};function chartBarChartMultiSeries(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var colors=["green","red","yellow","steelblue","orange"];var classed="d3X3domBarChartMultiSeries";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleBand().domain(columnKeys).rangeRound([0,dimensionX]).padding(.5)}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY]).nice()}if(typeof zScale==="undefined"){zScale=d3.scaleBand().domain(rowKeys).range([0,dimensionZ]).padding(.7)}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(columnKeys).range(colors)}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","bars"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var bars=component.barsMultiSeries().xScale(xScale).yScale(yScale).zScale(zScale).colors(colors);scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".bars").datum(function(d){return d}).call(bars);scene.append("directionallight").attr("direction","1 0 -1").attr("on","true").attr("intensity","0.4").attr("shadowintensity","0")})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartBarChartVertical(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var colors=["green","red","yellow","steelblue","orange"];var classed="d3X3domBarChartVertical";var debug=false;var xScale=void 0;var yScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y;if(typeof xScale==="undefined"){xScale=d3.scaleBand().domain(columnKeys).rangeRound([0,dimensionX]).padding(.5)}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY]).nice()}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(columnKeys).range(colors)}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["xAxis","yAxis","bars"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().quickView("left");var xAxis=component.axis().scale(xScale).direction("x").tickDirection("y");var yAxis=component.axis().scale(yScale).direction("y").tickDirection("x").tickSize(yScale.range()[1]-yScale.range()[0]);var bars=component.bars().xScale(xScale).yScale(yScale).colors(colors);scene.call(viewpoint);scene.select(".xAxis").call(xAxis);scene.select(".yAxis").call(yAxis);scene.select(".bars").datum(function(d){return d}).call(bars)})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartBubbleChart(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var colors=["green","red","yellow","steelblue","orange"];var classed="d3X3domBubbleChart";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var sizeScale=void 0;var sizeDomain=[.5,3.5];var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),valueExtent=_dataTransform$summar.valueExtent,coordinatesMax=_dataTransform$summar.coordinatesMax,rowKeys=_dataTransform$summar.rowKeys;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([0,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([0,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([0,maxZ]).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(rowKeys).range(colors)}if(typeof sizeScale==="undefined"){sizeScale=d3.scaleLinear().domain(valueExtent).range(sizeDomain)}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","bubbles"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var bubbles=component.bubblesMultiSeries().xScale(xScale).yScale(yScale).zScale(zScale).sizeScale(sizeScale).colorScale(colorScale);scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".bubbles").datum(function(d){return d}).call(bubbles);scene.append("directionallight").attr("direction","1 0 -1").attr("on","true").attr("intensity","0.4").attr("shadowintensity","0")})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.sizeDomain=function(_v){if(!arguments.length)return sizeDomain;sizeDomain=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartCrosshairPlot(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var classed="d3X3domCrosshairPlot";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),coordinatesMax=_dataTransform$summar.coordinatesMax;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([0,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([0,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([0,maxZ]).range([0,dimensionZ])}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","crosshairs"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var crosshair=component.crosshair().xScale(xScale).yScale(yScale).zScale(zScale);scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".crosshairs").selectAll(".crosshair").data(function(d){return d.values}).enter().append("group").classed("crosshair",true).each(function(){d3.select(this).call(crosshair)})})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartRibbonChartMultiSeries(){var width=500;var height=500;var dimensions={x:60,y:40,z:40};var colors=["green","red","yellow","steelblue","orange"];var classed="d3X3domRibbonChartMultiSeries";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scalePoint().domain(columnKeys).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY]).nice()}if(typeof zScale==="undefined"){zScale=d3.scaleBand().domain(rowKeys).range([0,dimensionZ]).padding(.4)}if(typeof colorScale==="undefined"){colorScale=d3.scaleOrdinal().domain(columnKeys).range(colors)}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","ribbons"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]).viewOrientation([-.61021,.77568,.16115,.65629]).viewPosition([77.63865,54.6947,104.38314]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var ribbons=component.ribbonMultiSeries().xScale(xScale).yScale(yScale).zScale(zScale).colors(colors);scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".ribbons").datum(function(d){return d}).call(ribbons);scene.append("directionallight").attr("direction","1 0 -1").attr("on","true").attr("intensity","0.4").attr("shadowintensity","0")})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartScatterPlot(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var color="orange";var classed="d3X3domScatterPlot";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),coordinatesMax=_dataTransform$summar.coordinatesMax;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([0,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([0,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([0,maxZ]).range([0,dimensionZ])}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","bubbles","crosshair","label"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var crosshair=component.crosshair().xScale(xScale).yScale(yScale).zScale(zScale);var label=component.label().xScale(xScale).yScale(yScale).zScale(zScale).offset(.5);var bubbles=component.bubbles().xScale(xScale).yScale(yScale).zScale(zScale).color(color).sizeDomain([.5,.5]).on("d3X3domClick",function(e){var d=d3.select(e.target).datum();scene.select(".crosshair").datum(d).classed("crosshair",true).each(function(){d3.select(this).call(crosshair)})}).on("d3X3domMouseOver",function(e){var d=d3.select(e.target).datum();scene.select(".label").datum(d).each(function(){d3.select(this).call(label)})}).on("d3X3domMouseOut",function(e){scene.select(".label").selectAll("*").remove()});scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".bubbles").datum(function(d){return d}).call(bubbles)})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.color=function(_v){if(!arguments.length)return color;color=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartSurfacePlot(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var colors=["blue","red"];var classed="d3X3domSurfacePlot";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;if(typeof xScale==="undefined"){xScale=d3.scalePoint().domain(rowKeys).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain(valueExtent).range([0,dimensionY]).nice()}if(typeof zScale==="undefined"){zScale=d3.scalePoint().domain(columnKeys).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleLinear().domain(valueExtent).range(colors).interpolate(d3.interpolateLab)}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","surface"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.axisThreePlane().xScale(xScale).yScale(yScale).zScale(zScale);var surface=component.surface().xScale(xScale).yScale(yScale).zScale(zScale).colors(colors);scene.call(viewpoint);scene.select(".axis").call(axis);scene.select(".surface").datum(function(d){return d}).call(surface)})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};return my}function chartVectorField(){var width=500;var height=500;var dimensions={x:40,y:40,z:40};var colors=d3.interpolateRdYlGn;var classed="d3X3domVectorFieldChart";var debug=false;var xScale=void 0;var yScale=void 0;var zScale=void 0;var colorScale=void 0;var sizeScale=void 0;var sizeDomain=[2,5];var origin={x:0,y:0,z:0};var vectorFunction=function vectorFunction(x,y,z){return{x:x,y:y,z:z}};var init=function init(data){var _dataTransform$summar=dataTransform(data).summary(),coordinatesMax=_dataTransform$summar.coordinatesMax,coordinatesMin=_dataTransform$summar.coordinatesMin;var minX=coordinatesMin.x,minY=coordinatesMin.y,minZ=coordinatesMin.z;var maxX=coordinatesMax.x,maxY=coordinatesMax.y,maxZ=coordinatesMax.z;var _dimensions=dimensions,dimensionX=_dimensions.x,dimensionY=_dimensions.y,dimensionZ=_dimensions.z;var extent=d3.extent(data.values.map(function(f){var vx=void 0,vy=void 0,vz=void 0;if("vx"in f){vx=f.vx;vy=f.vy;vz=f.vz}else{var _vectorFunction=vectorFunction(f.x,f.y,f.z);vx=_vectorFunction.x;vy=_vectorFunction.y;vz=_vectorFunction.z}return new x3dom.fields.SFVec3f(vx,vy,vz).length()}));if(typeof xScale==="undefined"){xScale=d3.scaleLinear().domain([minX,maxX]).range([0,dimensionX])}if(typeof yScale==="undefined"){yScale=d3.scaleLinear().domain([minY,maxY]).range([0,dimensionY])}if(typeof zScale==="undefined"){zScale=d3.scaleLinear().domain([minZ,maxZ]).range([0,dimensionZ])}if(typeof colorScale==="undefined"){colorScale=d3.scaleSequential().domain(extent.slice().reverse()).interpolator(colors)}if(typeof sizeScale==="undefined"){sizeScale=d3.scaleLinear().domain(extent).range(sizeDomain)}origin={x:minX<0?0:minX,y:minY<0?0:minY,z:minZ<0?0:minZ}};var my=function my(selection){var x3d=selection.append("x3d").attr("width",width+"px").attr("height",height+"px");if(debug){x3d.attr("showLog","true").attr("showStat","true")}var scene=x3d.append("scene");var layers=["axis","vectorFields"];scene.classed(classed,true).selectAll("group").data(layers).enter().append("group").attr("class",function(d){return d});scene.each(function(data){init(data);var viewpoint=component.viewpoint().centerOfRotation([dimensions.x/2,dimensions.y/2,dimensions.z/2]);var axis=component.crosshair().xScale(xScale).yScale(yScale).zScale(zScale);var vectorFields=component.vectorFields().xScale(xScale).yScale(yScale).zScale(zScale).colorScale(colorScale).sizeScale(sizeScale).vectorFunction(vectorFunction);scene.call(viewpoint);scene.select(".axis").datum(origin).call(axis);scene.select(".vectorFields").datum(function(d){return d}).call(vectorFields)})};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.dimensions=function(_v){if(!arguments.length)return dimensions;dimensions=_v;return this};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.zScale=function(_v){if(!arguments.length)return zScale;zScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.sizeDomain=function(_v){if(!arguments.length)return sizeDomain;sizeDomain=_v;return my};my.debug=function(_v){if(!arguments.length)return debug;debug=_v;return my};my.vectorFunction=function(_f){if(!arguments.length)return vectorFunction;vectorFunction=_f;return my};return my}var chart={barChartMultiSeries:chartBarChartMultiSeries,barChartVertical:chartBarChartVertical,bubbleChart:chartBubbleChart,crosshairPlot:chartCrosshairPlot,ribbonChartMultiSeries:chartRibbonChartMultiSeries,scatterPlot:chartScatterPlot,surfacePlot:chartSurfacePlot,vectorFieldChart:chartVectorField};var countries=["UK","France","Spain","Germany","Italy","Portugal"];var fruit=["Apples","Oranges","Pears","Bananas"];function randomNum(){return Math.floor(Math.random()*10)+1}function dataset1(){var data={key:"Fruit",values:fruit.map(function(d){return{key:d,value:randomNum(),x:randomNum(),y:randomNum(),z:randomNum()}})};return data}function dataset2(){var data=countries.map(function(d){return{key:d,values:fruit.map(function(d){return{key:d,value:randomNum(),x:randomNum(),y:randomNum(),z:randomNum()}})}});return data}function dataset3(){var points=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;var data={key:"Bubbles",values:d3.range(points).map(function(d,i){return{key:"Point"+i,value:randomNum(),x:randomNum(),y:randomNum(),z:randomNum()}})};return data}function dataset4(){var data=[{key:"a",values:[{key:"1",value:4},{key:"2",value:0},{key:"3",value:2},{key:"4",value:0},{key:"5",value:0}]},{key:"b",values:[{key:"1",value:4},{key:"2",value:0},{key:"3",value:2},{key:"4",value:0},{key:"5",value:0}]},{key:"c",values:[{key:"1",value:1},{key:"2",value:0},{key:"3",value:1},{key:"4",value:0},{key:"5",value:0}]},{key:"d",values:[{key:"1",value:4},{key:"2",value:0},{key:"3",value:2},{key:"4",value:0},{key:"5",value:0}]},{key:"e",values:[{key:"1",value:1},{key:"2",value:1},{key:"3",value:1},{key:"4",value:1},{key:"5",value:1}]}];return data}function dataset5(){var cx=.8;var cy=.3;var f=function f(vx,vz){return((vx-cx)*(vx-cx)+(vz-cy)*(vx-cx))*Math.random()};var xRange=d3.range(0,1.05,.1);var zRange=d3.range(0,1.05,.1);var nx=xRange.length;var nz=zRange.length;var data=d3.range(nx).map(function(i){var values=d3.range(nz).map(function(j){return{key:j,value:f(xRange[i],zRange[j])}});return{key:i,values:values}});return data}var randomData=Object.freeze({countries:countries,fruit:fruit,randomNum:randomNum,dataset1:dataset1,dataset2:dataset2,dataset3:dataset3,dataset4:dataset4,dataset5:dataset5});var author$1="James Saunders";var year=(new Date).getFullYear();var copyright="Copyright (C) "+year+" "+author$1;var index={version:version,author:author$1,copyright:copyright,license:license,chart:chart,component:component,dataTransform:dataTransform,randomData:randomData,events:events};return index});
